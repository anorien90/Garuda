<div class="space-y-6">
  <!-- Unified Search Interface -->
  <article class="card-surface rounded-xl border border-slate-200/70 dark:border-slate-800 bg-white/80 dark:bg-slate-900/70 p-5 space-y-4">
    <div class="flex items-center justify-between">
      <div>
        <h3 class="text-xl font-bold text-slate-900 dark:text-white">üîç Unified Search</h3>
        <p class="text-sm text-slate-600 dark:text-slate-400">Search across structured data (SQL) and semantic vectors (Qdrant)</p>
      </div>
      <div class="flex gap-2">
        <button id="search-mode-toggle-sql" class="px-3 py-1 text-xs font-bold rounded-lg transition bg-brand-600 text-white">SQL</button>
        <button id="search-mode-toggle-semantic" class="px-3 py-1 text-xs font-bold rounded-lg transition bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-700">Semantic</button>
        <button id="search-mode-toggle-both" class="px-3 py-1 text-xs font-bold rounded-lg transition bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-700">Both</button>
      </div>
    </div>
    
    <!-- SQL Search Form -->
    <div id="sql-search-form-container">
      <form id="search-form" class="space-y-3">
        <div>
          <label class="block text-sm font-medium mb-1 text-slate-800 dark:text-slate-100">Search Query</label>
          <input id="q" name="q" type="search" placeholder="keyword or entity" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm text-slate-900 dark:text-slate-100 focus:border-brand-500 focus:ring-brand-500"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-slate-800 dark:text-slate-100">Entity (optional)</label>
          <input id="entity" name="entity" type="text" placeholder="Filter by entity name" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm text-slate-900 dark:text-slate-100 focus:border-brand-500 focus:ring-brand-500"/>
        </div>
        <div class="grid gap-3 sm:grid-cols-2">
          <label class="space-y-1 text-sm font-medium text-slate-800 dark:text-slate-100">
            Min confidence
            <input id="min_conf" name="min_conf" type="number" min="0" max="1" step="0.05" value="0" class="mt-1 w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm focus:border-brand-500 focus:ring-brand-500"/>
          </label>
          <label class="space-y-1 text-sm font-medium text-slate-800 dark:text-slate-100">
            Limit
            <input id="limit" name="limit" type="number" min="1" max="200" value="50" class="mt-1 w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm focus:border-brand-500 focus:ring-brand-500"/>
          </label>
        </div>
        <button type="submit" class="inline-flex items-center justify-center rounded-lg bg-brand-600 text-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500">
          Search SQL
        </button>
      </form>
    </div>
    
    <!-- Semantic Search Form -->
    <div id="semantic-search-form-container" class="hidden">
      <form id="semantic-form" class="space-y-3">
        <div>
          <label class="block text-sm font-medium mb-1 text-slate-800 dark:text-slate-100">Semantic Query</label>
          <input id="semantic-q" type="search" placeholder="Natural language query for vector search" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm text-slate-900 dark:text-slate-100 focus:border-brand-500 focus:ring-brand-500"/>
        </div>
        <label class="space-y-1 text-sm font-medium text-slate-800 dark:text-slate-100">
          Top K Results
          <input id="semantic-topk" type="number" min="1" max="50" value="10" class="mt-1 w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm focus:border-brand-500 focus:ring-brand-500"/>
        </label>
        <button type="submit" class="inline-flex items-center justify-center rounded-lg bg-brand-600 text-white px-4 py-2 text-sm font-medium shadow-sm hover:bg-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500">
          Search Semantic
        </button>
      </form>
    </div>
    
    <!-- Results Container -->
    <div class="space-y-4">
      <div id="sql-results-container">
        <h4 class="text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">SQL Results</h4>
        <div id="results" class="grid gap-3"></div>
      </div>
      
      <div id="semantic-results-container" class="hidden">
        <h4 class="text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">Semantic Results</h4>
        <div id="semantic-results" class="grid gap-3"></div>
      </div>
    </div>
  </article>
</div>

<script>
// Search mode toggle
document.addEventListener('DOMContentLoaded', () => {
  const sqlBtn = document.getElementById('search-mode-toggle-sql');
  const semanticBtn = document.getElementById('search-mode-toggle-semantic');
  const bothBtn = document.getElementById('search-mode-toggle-both');
  
  const sqlForm = document.getElementById('sql-search-form-container');
  const semanticForm = document.getElementById('semantic-search-form-container');
  const sqlResults = document.getElementById('sql-results-container');
  const semanticResults = document.getElementById('semantic-results-container');
  
  function setMode(mode) {
    // Reset button styles
    [sqlBtn, semanticBtn, bothBtn].forEach(btn => {
      btn.classList.remove('bg-brand-600', 'text-white');
      btn.classList.add('bg-white', 'dark:bg-slate-900', 'text-slate-800', 'dark:text-slate-100', 'border', 'border-slate-200', 'dark:border-slate-700');
    });
    
    if (mode === 'sql') {
      sqlBtn.classList.add('bg-brand-600', 'text-white');
      sqlBtn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-800', 'dark:text-slate-100', 'border');
      sqlForm.classList.remove('hidden');
      semanticForm.classList.add('hidden');
      sqlResults.classList.remove('hidden');
      semanticResults.classList.add('hidden');
    } else if (mode === 'semantic') {
      semanticBtn.classList.add('bg-brand-600', 'text-white');
      semanticBtn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-800', 'dark:text-slate-100', 'border');
      sqlForm.classList.add('hidden');
      semanticForm.classList.remove('hidden');
      sqlResults.classList.add('hidden');
      semanticResults.classList.remove('hidden');
    } else if (mode === 'both') {
      bothBtn.classList.add('bg-brand-600', 'text-white');
      bothBtn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-800', 'dark:text-slate-100', 'border');
      sqlForm.classList.remove('hidden');
      semanticForm.classList.remove('hidden');
      sqlResults.classList.remove('hidden');
      semanticResults.classList.remove('hidden');
    }
    
    localStorage.setItem('garuda_search_mode', mode);
  }
  
  sqlBtn.addEventListener('click', () => setMode('sql'));
  semanticBtn.addEventListener('click', () => setMode('semantic'));
  bothBtn.addEventListener('click', () => setMode('both'));
  
  // Load saved mode
  const savedMode = localStorage.getItem('garuda_search_mode') || 'sql';
  setMode(savedMode);
});
</script>
