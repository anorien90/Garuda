<!-- Database Management Panel -->
<div class="space-y-6">
  <div class="card-surface rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-6">
    <div class="flex items-center justify-between mb-4">
      <div>
        <h3 class="text-lg font-bold text-slate-900 dark:text-white">Database Management</h3>
        <p class="text-xs text-slate-500">Create, switch, and merge separate databases for different research domains</p>
      </div>
      <button id="db-refresh" class="text-slate-400 hover:text-brand-500 transition" title="Refresh">
        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor"><path d="M480-192q-120 0-204-84t-84-204q0-120 84-204t204-84q65 0 120.5 27t95.5 72v-99h72v240H528v-72h131q-29-44-76-70t-103-26q-90 0-153 63t-63 153q0 90 63 153t153 63q84 0 144-55.5T693-456h74q-9 112-91 188t-196 76Z"/></svg>
      </button>
    </div>

    <!-- Active Database Indicator -->
    <div id="db-active-banner" class="mb-4 p-3 rounded-lg bg-brand-50 dark:bg-brand-900/20 border border-brand-200 dark:border-brand-800">
      <div class="flex items-center gap-2">
        <span class="h-2.5 w-2.5 rounded-full bg-brand-500 animate-pulse"></span>
        <span class="text-sm font-semibold text-brand-700 dark:text-brand-300">Active: </span>
        <span id="db-active-name" class="text-sm font-bold text-brand-800 dark:text-brand-200">loading…</span>
        <span id="db-active-desc" class="text-xs text-slate-500 ml-2"></span>
      </div>
    </div>

    <!-- Create New Database -->
    <div class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 mb-4">
      <h4 class="text-sm font-bold text-slate-700 dark:text-slate-200 mb-3">Create New Database</h4>
      <div class="grid gap-3 sm:grid-cols-3">
        <label class="block space-y-1">
          <span class="text-xs font-semibold text-slate-600 dark:text-slate-400">Name</span>
          <input id="db-new-name" type="text" placeholder="e.g. cybersecurity" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2 text-sm">
        </label>
        <label class="block space-y-1">
          <span class="text-xs font-semibold text-slate-600 dark:text-slate-400">Description</span>
          <input id="db-new-desc" type="text" placeholder="optional description" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2 text-sm">
        </label>
        <div class="flex items-end gap-2">
          <label class="flex items-center gap-1.5 text-xs">
            <input id="db-new-activate" type="checkbox" class="rounded border-slate-300 dark:border-slate-600">
            <span class="text-slate-600 dark:text-slate-400">Switch to it</span>
          </label>
          <button id="db-create-btn" class="ml-auto px-4 py-2 rounded-lg bg-brand-600 text-white text-sm font-medium hover:bg-brand-500 transition">Create</button>
        </div>
      </div>
    </div>

    <!-- Database List -->
    <div class="mb-4">
      <h4 class="text-sm font-bold text-slate-700 dark:text-slate-200 mb-2">Registered Databases</h4>
      <div id="db-list" class="space-y-2 text-sm">
        <p class="text-slate-400 text-xs">Loading…</p>
      </div>
    </div>

    <!-- Merge Databases -->
    <div class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 mb-4">
      <h4 class="text-sm font-bold text-slate-700 dark:text-slate-200 mb-3">Merge Databases</h4>
      <p class="text-xs text-slate-500 mb-3">Copy all entities, relationships, intelligence, pages, and vector embeddings from source into target.</p>
      <div class="grid gap-3 sm:grid-cols-3">
        <label class="block space-y-1">
          <span class="text-xs font-semibold text-slate-600 dark:text-slate-400">Source</span>
          <select id="db-merge-source" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2 text-sm"></select>
        </label>
        <label class="block space-y-1">
          <span class="text-xs font-semibold text-slate-600 dark:text-slate-400">Target</span>
          <select id="db-merge-target" class="w-full rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2 text-sm"></select>
        </label>
        <div class="flex items-end">
          <button id="db-merge-btn" class="px-4 py-2 rounded-lg bg-amber-600 text-white text-sm font-medium hover:bg-amber-500 transition">Merge</button>
        </div>
      </div>
      <div id="db-merge-status" class="mt-2 text-xs text-slate-500 hidden"></div>
    </div>

    <!-- Global Search -->
    <div class="p-4 rounded-lg bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800">
      <h4 class="text-sm font-bold text-slate-700 dark:text-slate-200 mb-3">Global Search (across all databases)</h4>
      <div class="flex gap-2">
        <input id="db-global-query" type="text" placeholder="Search entities & intelligence…" aria-label="Global database search" class="flex-1 rounded-lg border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2 text-sm">
        <button id="db-global-search-btn" class="px-4 py-2 rounded-lg bg-brand-600 text-white text-sm font-medium hover:bg-brand-500 transition">Search</button>
      </div>
      <div id="db-global-results" class="mt-3 space-y-2 hidden"></div>
    </div>
  </div>
</div>
